<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Upload Music | 2BANGUZHQ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root{
  --black:#000;
  --dark:#020402;
  --neon:#39FF14;
  --neon-soft:#7CFF6B;
  --blue:#00B4FF;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:system-ui,-apple-system,Arial,sans-serif;
}

body{
  min-height:100vh;
  display:grid;
  place-items:center;
  background:
    radial-gradient(900px circle at 20% 15%, rgba(57,255,20,.25), transparent 55%),
    radial-gradient(900px circle at 80% 85%, rgba(0,180,255,.18), transparent 55%),
    linear-gradient(180deg,#020402,#000);
  color:#fff;
}

.card{
  width:340px;
  padding:24px;
  border-radius:22px;
  background:linear-gradient(180deg,#0a120a,#020402);
  border:1px solid rgba(57,255,20,.35);
  box-shadow:
    inset 0 0 30px rgba(57,255,20,.25),
    0 30px 60px rgba(0,0,0,.9);
}

h1{
  text-align:center;
  color:var(--blue);
  margin-bottom:8px;
}

p{
  text-align:center;
  font-size:12px;
  opacity:.7;
  margin-bottom:18px;
}

input{
  width:100%;
  padding:10px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid rgba(57,255,20,.3);
  background:#020402;
  color:#fff;
}

button{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-weight:800;
  background:linear-gradient(180deg,var(--neon),#0a120a);
  color:#000;
}

.back{
  margin-top:10px;
  background:#020402;
  color:var(--neon);
  border:1px solid rgba(57,255,20,.35);
}
</style>
</head>

<body>

<div class="card">
  <h1>Upload Music</h1>
  <p>Add your track to 2BANGUZHQ</p>

  <input type="text" id="title" placeholder="Song Title">
  <input type="text" id="artist" placeholder="Artist Name">
  <input type="file" id="file" accept="audio/*">

  <button onclick="saveTrack()">Save Track</button>
  <button class="back" onclick="goBack()">Back to Player</button>
</div>

<script>
function saveTrack(){
  const title = document.getElementById("title").value.trim();
  const artist = document.getElementById("artist").value.trim();
  const fileInput = document.getElementById("file");
  const file = fileInput.files[0];

  if(!title || !artist || !file){
    alert("Please fill out all fields.");
    return;
  }

  console.log("File selected:", file.name, file.size);

  const reader = new FileReader();

  reader.onerror = () => {
    alert("‚ùå File could not be read by browser.");
  };

  reader.onload = function(e){
    console.log("File loaded");

    const track = {
      title,
      artist,
      src: e.target.result
    };

    let tracks = [];
    try {
      tracks = JSON.parse(localStorage.getItem("tracks")) || [];
    } catch {
      tracks = [];
    }

    tracks.push(track);
    localStorage.setItem("tracks", JSON.stringify(tracks));

    console.log("Track saved, redirecting...");
    window.location.href = "player.html";
  };

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
