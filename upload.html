<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Music</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h2>Upload Music</h2>

<input id="title" placeholder="Song title"><br><br>
<input id="artist" placeholder="Artist"><br><br>
<input id="file" type="file" accept="audio/*"><br><br>

<button onclick="saveTrack()">Save</button>

<script>
function saveTrack(){
  const title = document.getElementById("title").value.trim();
  const artist = document.getElementById("artist").value.trim();
  const fileInput = document.getElementById("file");

  if(!title || !artist || !fileInput.files.length){
    alert("Fill everything");
    return;
  }

  const reader = new FileReader();

  reader.onload = function(e){
    const tracks = JSON.parse(localStorage.getItem("tracks")) || [];

    tracks.push({
      title: title,
      artist: artist,
      src: e.target.result
    });

    localStorage.setItem("tracks", JSON.stringify(tracks));
    window.location.href = "player.html";
  };

  reader.readAsDataURL(fileInput.files[0]);
}
</script>

</body>
</html>
