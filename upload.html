<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Music | 2BANGUZHQ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h2>Upload Music</h2>

<input id="title" placeholder="Song title"><br><br>
<input id="artist" placeholder="Artist"><br><br>
<input id="file" type="file" accept="audio/*"><br><br>

<button onclick="saveTrack()">Save</button>

<script>
function saveTrack(){
  const title = document.getElementById("title").value;
  const artist = document.getElementById("artist").value;
  const fileInput = document.getElementById("file");
  const file = fileInput.files[0];

  if(!title || !artist || !file){
    alert("Fill everything");
    return;
  }

  const reader = new FileReader();

  reader.onload = function(){
    const tracks = JSON.parse(localStorage.getItem("tracks")) || [];
    tracks.push({
      title: title,
      artist: artist,
      src: reader.result   // âœ… BASE64 AUDIO (PERSISTS)
    });

    localStorage.setItem("tracks", JSON.stringify(tracks));

    // ðŸ‘‰ GO BACK TO PLAYER
    window.location.href = "player.html";
  };

  reader.readAsDataURL(file); // ðŸ”‘ REQUIRED
}
</script>

</body>
</html>
