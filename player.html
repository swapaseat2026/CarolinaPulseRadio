<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h2 id="title">No song</h2>
<p id="artist"></p>

<button id="playBtn">â–¶ Play</button>
<button id="nextBtn">Next</button>

<audio id="audio"></audio>

<script>
const audio = document.getElementById("audio");
const titleEl = document.getElementById("title");
const artistEl = document.getElementById("artist");
const playBtn = document.getElementById("playBtn");
const nextBtn = document.getElementById("nextBtn");

let tracks = JSON.parse(localStorage.getItem("tracks")) || [];
let index = 0;

function loadTrack(i){
  if(tracks.length === 0){
    titleEl.textContent = "No tracks found";
    return;
  }

  index = (i + tracks.length) % tracks.length;
  audio.src = tracks[index].src;
  audio.load();

  titleEl.textContent = tracks[index].title;
  artistEl.textContent = tracks[index].artist;
}

function togglePlay(){
  if(audio.paused){
    audio.play().catch(err => console.error("PLAY ERROR:", err));
  } else {
    audio.pause();
  }
}

playBtn.onclick = togglePlay;
nextBtn.onclick = () => loadTrack(index + 1);

loadTrack(0);
</script>

</body>
</html>
